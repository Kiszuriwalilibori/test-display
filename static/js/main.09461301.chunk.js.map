{"version":3,"sources":["js/common.js","js/fixtures.js","redux/imagesReducer.js","redux/modalReducer.js","components/awaiting.jsx","components/App.jsx","reportWebVitals.js","index.js"],"names":["splitUrls","obj","thumb","small","regular","extractData","ary","map","item","result","id","urls","tags","description","alt_description","modal","name","user","first_name","last_name","twitter","twitter_username","createFormStyleLocationRelative","str","baseClass","getTags","Set","flat","title","getOptions","value","label","string","toUpperCase","slice","setBackground","backgroundURL","root","document","getElementById","style","background","backgroundSize","classList","add","accessKey","trending","getImages","createAction","getHints","clearHints","showError","clearError","setCount","chooseSubject","clearImages","setCollectionLength","showHintsMsg","hideHintsMsg","getBackgroundImage","initialState","images","hints","error","code","count","lastFetchedPage","subject","collectionLength","hintsMessageVisible","backgroundImage","imagesReducer","createReducer","builder","addCase","state","action","payload","temp","push","apply","length","addDefaultCase","fetchHints","pattern","dispatch","getState","Unsplash","search","photos","then","toJson","json","results","catch","err","message","fetchImages","shouldFetch","total_pages","fetchBackgroundImage","getRandomPhoto","query","orientation","isMobile","window","matchMedia","matches","image","full","raw","console","log","showModal","hideModal","getDetails","modalReducer","isVisible","details","data","location","city","country","author","profile_image","fetchDetails","getPhoto","Awaiting","Component","props","fallback","Results","lazy","Search","App","basename","process","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","middleware","getDefaultMiddleware","concat","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.09461301.chunk.js","sourcesContent":["import { fallbackBackground } from \"./fixtures\";\r\n\r\nexport const splitUrls = obj => {\r\n  const thumb = obj.thumb ? obj.thumb + \" \" + \"200w\" + \", \" : \"\";\r\n  const small = obj.small ? obj.small + \" \" + \"400w\" + \", \" : \"\";\r\n  const regular = obj.regular ? obj.regular + \" \" + \"1080w\" + \", \" : \"\";\r\n  return thumb + small + regular;\r\n};\r\n\r\nexport const extractData = ary => {\r\n  let res = ary.map(item => {\r\n    let result = {};\r\n    result.id = item.id;\r\n    result.urls = splitUrls(item.urls);\r\n    result.tags = item.tags;\r\n    result.description = item.alt_description || item.description || \"\";\r\n    result.modal = {\r\n      name: item.user.name || item.first_name + \" \" + item.last_name || \"\",\r\n      twitter: item.user.twitter_username || \"\",\r\n    };\r\n    return result;\r\n  });\r\n  return res;\r\n};\r\n\r\nexport const createFormStyleLocationRelative = (str, baseClass) => {\r\n  switch (str) {\r\n    case \"/\":\r\n      return `${baseClass} form--search`;\r\n\r\n    case \"/images\":\r\n      return `${baseClass} form--images`;\r\n\r\n    default:\r\n      return `${baseClass} form--search`;\r\n  }\r\n};\r\n\r\nexport const getTags = ary => [\r\n  ...new Set(\r\n    ary\r\n      .map(item => item.tags)\r\n      .flat()\r\n      .map(item => item.title)\r\n  ),\r\n];\r\n\r\nexport function capitalizeFirstLetter(string) {\r\n  return string[0].toUpperCase() + string.slice(1);\r\n}\r\n\r\nexport const getOptions = ary =>\r\n  ary.map(item => {\r\n    return { value: item, label: capitalizeFirstLetter(item) };\r\n  });\r\n\r\nexport const setBackground = backgroundURL => {\r\n  var root = document.getElementById(\"root\");\r\n\r\n  if (backgroundURL) {\r\n    root.style.background = `url(${backgroundURL}) no-repeat center center fixed`;\r\n    root.style.backgroundSize = `cover`;\r\n  } else {\r\n    root.classList.add(\"root--fallback-background\");\r\n  }\r\n};\r\n","export const APP_ACCESS_KEY = \"DQqGbYve6sTIg4j9f9EPdU12FLtjyb4hiplBbNECOZA\";\r\n\r\nexport const accessKey= { accessKey: APP_ACCESS_KEY}\r\n\r\nexport const trending =['flowers', 'wallpapers', 'backgrounds', 'happy','love'];\r\n\r\nexport const fallbackBackground ={\r\n    mobile: 'url(../images/background_mobile.jpg) no-repeat center center fixed',\r\n    small: 'background: url(../images/background_small.jpg) no-repeat center center fixed',\r\n    tablet: 'background: url(../images/background_tablet.jpg) no-repeat center center fixed',\r\n    desktop: 'background: url(../images/background_desktop.jpg) no-repeat center center fixed',\r\n    large:'background: url(../images/background.jpg) no-repeat center center fixed'\r\n}","import { createAction, createReducer } from \"@reduxjs/toolkit\";\r\nimport Unsplash, { toJson } from \"unsplash-js\";\r\nimport { extractData, getOptions, getTags, setBackground} from \"../js/common\";\r\nimport { accessKey, fallbackBackground } from \"../js/fixtures\";\r\n\r\n\r\nexport const getImages = createAction(\"IMAGES_GET\");\r\nexport const getHints = createAction(\"HINTS_GET\");\r\nexport const clearHints = createAction(\"HINTS_CLEAR\");\r\nexport const showError = createAction(\"ERROR_SHOW\");\r\nexport const clearError = createAction(\"ERROR_CLEAR\");\r\nexport const setCount = createAction(\"COUNT_SET\");\r\nexport const chooseSubject = createAction(\"SUBJECT_CHOOSE\");\r\nexport const clearImages = createAction(\"IMAGES_CLEAR\");\r\nexport const setCollectionLength = createAction(\"COLLECTION_LENGTH_SET\");\r\nexport const showHintsMsg = createAction(\"HINTS_MESSAGE_SHOW\");\r\nexport const hideHintsMsg = createAction(\"HINTS_MESSAGE_HIDE\");\r\nexport const getBackgroundImage = createAction(\"GET_BACKGROUND_IMAGE\");\r\n\r\nconst initialState = {\r\n  images: [],\r\n  hints: [],\r\n  error: { value: false, code: \"\" },\r\n  count: 0,\r\n  lastFetchedPage: 0,\r\n  subject: \"\",\r\n  collectionLength: 0,\r\n  hintsMessageVisible: false,\r\n  backgroundImage: {},\r\n};\r\n\r\nconst imagesReducer = createReducer(initialState, builder => {\r\n  builder\r\n\r\n    .addCase(getImages, (state, action) => {\r\n      if (action.payload) {\r\n        let temp = [...state.images];\r\n        temp.push.apply(temp, extractData(action.payload));\r\n        state.images = temp;\r\n        state.lastFetchedPage++;\r\n      }\r\n    })\r\n\r\n    .addCase(setCollectionLength, (state, action) => {\r\n      if (action.payload) {\r\n        state.collectionLength = action.payload;\r\n      }\r\n    })\r\n\r\n    .addCase(getHints, (state, action) => {\r\n      if (action.payload) {\r\n        state.hints = action.payload;\r\n      }\r\n\r\n      if (action.payload.length) {\r\n        state.hintsMessageVisible = initialState.hintsMessageVisible;\r\n      } else {\r\n        state.hintsMessageVisible = true;\r\n      }\r\n    })\r\n    .addCase(setCount, (state, action) => {\r\n      if (action.payload) {\r\n        state.count = action.payload;\r\n      }\r\n    })\r\n\r\n    .addCase(clearHints, state => {\r\n      state.hints = initialState.hints;\r\n    })\r\n\r\n    .addCase(getBackgroundImage, (state, action) => {\r\n      state.backgroundImage = action.payload;\r\n    })\r\n\r\n    .addCase(hideHintsMsg, state => {\r\n      state.hintsMessageVisible = initialState.hintsMessageVisible;\r\n    })\r\n\r\n    .addCase(showHintsMsg, state => {\r\n      state.hintsMessageVisible = true;\r\n    })\r\n\r\n    .addCase(clearImages, (state, action) => {\r\n      state.lastFetchedPage = initialState.lastFetchedPage;\r\n      state.images = initialState.images;\r\n      state.subject = action.payload;\r\n    })\r\n\r\n    .addCase(showError, (state, action) => {\r\n      if (action.payload) {\r\n        state.error.value = true;\r\n        state.error.code = action.payload;\r\n      }\r\n    })\r\n    .addCase(clearError, state => {\r\n      state.error.value = false;\r\n      state.error.code = \"\";\r\n    })\r\n\r\n    .addCase(chooseSubject, (state, action) => {\r\n      if (action.payload) {\r\n        state.subject = action.payload;\r\n      }\r\n    })\r\n    .addDefaultCase(() => {});\r\n});\r\n\r\nexport default imagesReducer;\r\n\r\n/////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nexport function fetchHints(pattern) {\r\n  return (dispatch, getState) => {\r\n    if (pattern && pattern.length > 3) {\r\n      const unsplash = new Unsplash(accessKey);\r\n      unsplash.search\r\n        .photos(pattern, 1, 30)\r\n        .then(toJson)\r\n        .then(json => {\r\n          dispatch(getHints(getOptions(getTags(json.results))));\r\n        })\r\n        .catch(err => {\r\n          dispatch(showError(err.message));\r\n        });\r\n    } else {\r\n      if (getState().images.hints.length) {\r\n        dispatch(clearHints());\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\nexport function fetchImages(pattern) {\r\n  return (dispatch, getState) => {\r\n    const lastSubject = getState().images.subject;\r\n    var lastFetchedPage, collectionLength;\r\n    var shouldFetch = false;\r\n\r\n    if (lastSubject === pattern) {\r\n      collectionLength = getState().images.collectionLength;\r\n      lastFetchedPage = getState().images.lastFetchedPage;\r\n      if (collectionLength > lastFetchedPage) {\r\n        shouldFetch = true;\r\n      } else {\r\n        shouldFetch = false;\r\n        dispatch(showError(\"Nie ma więcej zdjęć w danej kategorii - nie próbuj ich pobrać\"));\r\n      }\r\n    } else {\r\n      dispatch(clearImages(pattern));\r\n      lastFetchedPage = initialState.lastFetchedPage;\r\n      shouldFetch = true;\r\n    }\r\n    if (shouldFetch) {\r\n      const unsplash = new Unsplash(accessKey);\r\n      unsplash.search\r\n        .photos(pattern, lastFetchedPage + 1, 30)\r\n        .then(toJson)\r\n        .then(json => {\r\n          dispatch(getImages(json.results));\r\n          dispatch(setCollectionLength(json.total_pages));\r\n        })\r\n        .catch(err => {\r\n          dispatch(showError(err.message));\r\n        });\r\n    }\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function fetchBackgroundImage() {\r\n  return dispatch => {\r\n    const unsplash = new Unsplash(accessKey);\r\n    unsplash.photos\r\n      .getRandomPhoto({ query: \"nature\", orientation: \"landscape\" })\r\n      .then(toJson)\r\n      .then(json => {\r\n        //dispatch(getBackgroundImage(json));\r\n\r\n        let isMobile = window.matchMedia(\"(max-width: 768px)\").matches;\r\n        var root = document.getElementById(\"root\");\r\n        root.style.backgroundSize = `cover`;\r\n        const image = isMobile ? json.urls?.small || json.urls?.regular || json.urls?.full || json.urls?.raw : json.urls?.regular || json.urls?.full || json.urls?.raw || json.urls?.small;\r\n\r\n        if (image) {\r\n          root.style.background = `url(${image}) no-repeat center center fixed`;\r\n          root.style.backgroundSize = `cover`;\r\n          setBackground(image);\r\n        } else {\r\n          console.log('else fallback');\r\n          setBackground();\r\n          \r\n        }\r\n      })\r\n      .catch(err => {\r\n       \r\n        setBackground();\r\n        dispatch(showError(err.message));\r\n      });\r\n  };\r\n}\r\n","import { createAction, createReducer } from \"@reduxjs/toolkit\";\r\nimport Unsplash, { toJson } from \"unsplash-js\";\r\nimport { splitUrls } from \"../js/common\";\r\nimport {accessKey} from '../js/fixtures';\r\nimport {showError} from'./imagesReducer';\r\n\r\nexport const showModal = createAction(\"MODAL_SHOW\");\r\nexport const hideModal = createAction(\"MODAL_HIDE\");\r\nexport const getDetails = createAction(\"DETAILS_GET\");\r\n\r\nconst initialState = {\r\n  isVisible: false,\r\n  details: {},\r\n  error: ''\r\n};\r\n\r\nconst modalReducer = createReducer(initialState, builder => {\r\n  builder\r\n    \r\n    .addCase(showModal, (state) => {\r\n       \r\n        state.isVisible =true;\r\n              \r\n      })\r\n      .addCase(hideModal, (state) => {\r\n        state.isVisible =false;\r\n        \r\n      })  \r\n     \r\n      .addCase(getDetails, (state,action) => {\r\n       if (action.payload) {\r\n        const data = action.payload;\r\n        const details ={};\r\n        details.location = data.location?.city? data.location.city+', '+((data.location.country)? data.location.country:''):'';\r\n        details.author = data.user.name || data.user.last_name ||data.user.first_name ||'';\r\n        details.twitter =data.user.twitter_username ||'';\r\n        details.profile_image = data.user.profile_image.small ||'';\r\n        details.urls = data.urls? splitUrls(data.urls):'';\r\n\r\n        state.details = details;\r\n\r\n        if (state.details){state.isVisible = true}\r\n      }\r\n        \r\n      }) \r\n    .addDefaultCase(() => {});\r\n});\r\n\r\nexport default modalReducer;\r\n\r\n\r\nexport function fetchDetails(id) {\r\n  return dispatch => {\r\n    \r\n    const unsplash = new Unsplash(accessKey);\r\n    \r\n    unsplash.photos.getPhoto(id)\r\n      .then(toJson)\r\n      .then(json => {\r\n        dispatch(getDetails(json));\r\n        \r\n      }).catch(err => {dispatch(showError(err.message))});\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// /////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n// const getTags = ary => [\r\n//   ...new Set(\r\n//     ary\r\n//       .map(item => item.tags)\r\n//       .flat()\r\n//       .map(item => item.title)\r\n//   ),\r\n// ];\r\n\r\n// function capitalizeFirstLetter(string) {\r\n//     return string[0].toUpperCase() + string.slice(1);\r\n// }\r\n// const getOptions = ary =>ary.map((item)=>{return{value:item, label:capitalizeFirstLetter(item)}});\r\n\r\n\r\n\r\n\r\n// export function fetchHints(pattern) {\r\n//   return dispatch => {\r\n//     const APP_ACCESS_KEY = \"DQqGbYve6sTIg4j9f9EPdU12FLtjyb4hiplBbNECOZA\";\r\n//     const unsplash = new Unsplash({ accessKey: APP_ACCESS_KEY });\r\n//     unsplash.search\r\n//       .photos(pattern, 1, 30)\r\n//       .then(toJson)\r\n//       .then(json => {\r\n//         dispatch(getHints(getOptions(getTags(json.results))));\r\n//       }).catch(err => {dispatch(showError(err.message))});\r\n//   };\r\n// }\r\n\r\n\r\n// // const extractData=(ary)=>{\r\n// //     let res =ary.map((item)=>{let result={};result.id=item.id;result.urls=item.urls;result.tags=item.tags;return result;})\r\n// //     return res;\r\n// //   }\r\n\r\n\r\n\r\n\r\n// export function fetchImages(pattern) {\r\n//     return (dispatch, getState) => {\r\n      \r\n//       dispatch (chooseSubject(pattern));\r\n//       //const APP_ACCESS_KEY = \"DQqGbYve6sTIg4j9f9EPdU12FLtjyb4hiplBbNECOZA\";\r\n\r\n//       const unsplash = new Unsplash({ accessKey: APP_ACCESS_KEY });\r\n//       const lastFetchedPage =getState().images.lastFetchedPage;\r\n//       unsplash.search.photos(pattern, lastFetchedPage + 1, 30)\r\n//       .then(toJson)\r\n//       .then(json => {\r\n       \r\n//         //const count = json.total_pages;\r\n  \r\n//         dispatch(getImages(json.results));\r\n    \r\n//         //const store =[];\r\n//         //var index =1;\r\n \r\n// //     function recursiveFetch(){\r\n// //     unsplash.search.photos(pattern, index, 30).then(toJson).then(json=>{\r\n// //         store.push(json?.results);\r\n// //         //json?.results && dispatch(getImages(extractData(json.results)));\r\n// //         console.log('it is fetched:',extractData(json.results));\r\n// //         index++;\r\n// //         console.log('index', index);\r\n\r\n// //     }).then((json)=>{if(index<=count){recursiveFetch()} else{console.log('store',store);dispatch(getImages(extractData(store)));}}).catch(err => {dispatch(showError(err.message))}) \r\n// // }\r\n\r\n\r\n// //recursiveFetch();\r\n\r\n// }).catch(err => {dispatch(showError(err.message))})\r\n//     }\r\n// }\r\n  ","import React, { Suspense } from \"react\";\r\nconst EmptyLoader = () => null;\r\nconst Awaiting = (Component) => {\r\n  return (props) => (\r\n    <Suspense fallback={EmptyLoader()}>\r\n      <Component {...props} />\r\n    </Suspense>\r\n  );\r\n};\r\nexport default Awaiting;\r\n","import {lazy} from 'react';\nimport Awaiting from './awaiting';\nimport '../styles/App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nconst Results = lazy(()=>import('./Results'));\nconst Search = lazy(()=>import('./SearchSection'));\n\nfunction App() {\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n    <Switch>\n      <Route exact  path = \"/\" component ={Awaiting(Search)} />\n      <Route exact  path = \"/images\" component ={Awaiting(Results)} />\n    </Switch>\n</Router> \n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport thunk from \"redux-thunk\";\nimport { Provider } from \"react-redux\";\nimport { configureStore } from '@reduxjs/toolkit';\nimport imagesReducer from './redux/imagesReducer';\nimport modalReducer from './redux/modalReducer';\n\nexport const store = configureStore({\n  reducer: {images:imagesReducer, modal:modalReducer},\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(thunk),\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n\nreportWebVitals();\n"],"sourceRoot":""}